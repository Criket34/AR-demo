<a-marker type="pattern" url="doki-color.patt">
  <a-entity
    id="myModel"
    gltf-model="url(doki-color.glb)"
    scale="3 3 3"
    position="0 0 0"
    rotation="45 180 0"
  ></a-entity>
</a-marker>

<script>
  const model = document.getElementById("myModel");

  let isDragging = false;
  let lastX = 0;
  let currentRotationY = 180; // 初期値をモデルの rotation に合わせる

  document.addEventListener("touchstart", (e) => {
    if (e.touches.length === 1) {
      isDragging = true;
      lastX = e.touches[0].clientX;
    }
  });

  document.addEventListener("touchmove", (e) => {
    if (isDragging && e.touches.length === 1) {
      const deltaX = e.touches[0].clientX - lastX;
      lastX = e.touches[0].clientX;

      // 画面移動量を回転に変換（感度は適宜調整）
      currentRotationY += deltaX * 0.5;

      model.setAttribute("rotation", `45 ${currentRotationY} 0`);
    }
  });

  document.addEventListener("touchend", () => {
    isDragging = false;
  });
</script>
